<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰¹æ•ˆæ¸¬è©¦ - ç°¡åŒ–ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #00d9ff;
        }

        .video-container {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 15px;
            overflow: visible;
            margin-bottom: 20px;
        }

        #testVideo {
            width: 100%;
            height: 100%;
            border-radius: inherit;
            object-fit: cover;
            position: relative;
            z-index: 1;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 12px;
            background: #2a2a4e;
            color: white;
            border: 2px solid #00d9ff;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        button:hover {
            background: #00d9ff;
            color: #1a1a2e;
            transform: translateY(-2px);
        }

        button.active {
            background: #00d9ff;
            color: #1a1a2e;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.6);
        }

        .status {
            background: #2a2a4e;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .status h3 {
            color: #00d9ff;
            margin-bottom: 10px;
        }

        /* æ¿¾é¡ç‰¹æ•ˆ */
        .effect-bw {
            filter: grayscale(100%) !important;
        }

        .effect-warm {
            filter: sepia(0.8) saturate(1.5) hue-rotate(-20deg) brightness(1.1) contrast(1.1) !important;
        }

        /* å½©è™¹é‚Šæ¡† */
        @keyframes rainbow-border {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        .video-container.effect-rainbow-border::before {
            content: '';
            position: absolute;
            inset: -4px;
            background: linear-gradient(45deg, 
                #ff0000, #ff7f00, #ffff00, #00ff00, 
                #0000ff, #4b0082, #9400d3, #ff0000);
            background-size: 400%;
            border-radius: 19px;
            z-index: 0;
            animation: rainbow-border 3s linear infinite;
        }

        /* éœ“è™¹é‚Šæ¡† */
        @keyframes neon-glow {
            0%, 100% {
                box-shadow: 0 0 5px #00d9ff, 0 0 10px #00d9ff, 
                           0 0 20px #00d9ff, 0 0 40px #00d9ff,
                           inset 0 0 10px rgba(0, 217, 255, 0.2);
            }
            50% {
                box-shadow: 0 0 10px #00d9ff, 0 0 20px #00d9ff, 
                           0 0 40px #00d9ff, 0 0 80px #00d9ff,
                           inset 0 0 20px rgba(0, 217, 255, 0.4);
            }
        }

        .video-container.effect-neon {
            box-shadow: 0 0 5px #00d9ff, 0 0 10px #00d9ff, 
                       0 0 20px #00d9ff, 0 0 40px #00d9ff;
            animation: neon-glow 1.5s ease-in-out infinite;
        }

        /* ç™¼å…‰é‚Šæ¡† */
        .video-container.effect-glow {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8),
                       0 0 40px rgba(255, 215, 0, 0.6),
                       0 0 60px rgba(255, 215, 0, 0.4);
        }

        /* å‹•ç•«ç‰¹æ•ˆ */
        .animation-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 10;
            border-radius: 15px;
        }

        @keyframes fall {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(calc(100% + 50px)) rotate(360deg);
                opacity: 0;
            }
        }

        .animation-overlay div {
            position: absolute;
            font-size: 24px;
            animation: fall linear;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ ç‰¹æ•ˆæ¸¬è©¦å·¥å…· - ç°¡åŒ–ç‰ˆ</h1>

        <div class="status">
            <h3>ğŸ“Š ç‹€æ…‹è³‡è¨Š</h3>
            <div id="statusInfo">ç­‰å¾…æ”å½±æ©Ÿå•Ÿå‹•...</div>
        </div>

        <div class="video-container" id="videoContainer">
            <video id="testVideo" autoplay muted playsinline></video>
        </div>

        <div class="controls">
            <button onclick="testEffect('bw')">âš« é»‘ç™½</button>
            <button onclick="testEffect('warm')">ğŸ”¥ æš–è‰²èª¿</button>
            <button onclick="testEffect('rainbowBorder')">ğŸŒˆ å½©è™¹é‚Šæ¡†</button>
            <button onclick="testEffect('neon')">ğŸ’¡ éœ“è™¹</button>
            <button onclick="testEffect('glow')">âœ¨ ç™¼å…‰</button>
            <button onclick="testEffect('particles')">â­ æ˜Ÿæ˜Ÿ</button>
            <button onclick="testEffect('hearts')">â¤ï¸ æ„›å¿ƒ</button>
            <button onclick="testEffect('confetti')">ğŸ‰ å½©å¸¶</button>
            <button onclick="testEffect('snow')">â„ï¸ é›ªèŠ±</button>
            <button onclick="clearAllEffects()" style="background: #ff4444;">ğŸ§¹ æ¸…é™¤</button>
        </div>
    </div>

    <script>
        const video = document.getElementById('testVideo');
        const container = document.getElementById('videoContainer');
        const statusInfo = document.getElementById('statusInfo');
        let currentEffect = null;

        // å•Ÿå‹•æ”å½±æ©Ÿ
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { width: 1280, height: 720 }, 
                    audio: false 
                });
                video.srcObject = stream;
                statusInfo.innerHTML = 'âœ… æ”å½±æ©Ÿå·²å•Ÿå‹•<br>å¯ä»¥é–‹å§‹æ¸¬è©¦ç‰¹æ•ˆäº†ï¼';
                console.log('âœ… æ”å½±æ©Ÿå·²å•Ÿå‹•');
            } catch (error) {
                statusInfo.innerHTML = 'âŒ ç„¡æ³•å•Ÿå‹•æ”å½±æ©Ÿ: ' + error.message;
                console.error('âŒ æ”å½±æ©ŸéŒ¯èª¤:', error);
            }
        }

        function testEffect(effectType) {
            console.log('ğŸ¨ æ¸¬è©¦ç‰¹æ•ˆ:', effectType);
            
            // æ¸…é™¤æ‰€æœ‰æŒ‰éˆ•çš„ active ç‹€æ…‹
            document.querySelectorAll('button').forEach(btn => {
                btn.classList.remove('active');
            });

            // å¦‚æœé»æ“Šç›¸åŒç‰¹æ•ˆ,å‰‡æ¸…é™¤
            if (currentEffect === effectType) {
                clearAllEffects();
                return;
            }

            // æ¸…é™¤èˆŠç‰¹æ•ˆ
            clearAllEffects();

            // è¨­ç½®æ–°ç‰¹æ•ˆ
            currentEffect = effectType;
            event.target.classList.add('active');

            switch (effectType) {
                case 'bw':
                    video.classList.add('effect-bw');
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨é»‘ç™½ç‰¹æ•ˆ<br>filter: grayscale(100%)';
                    console.log('âœ… é»‘ç™½ç‰¹æ•ˆå·²å¥—ç”¨');
                    break;

                case 'warm':
                    video.classList.add('effect-warm');
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨æš–è‰²èª¿ç‰¹æ•ˆ<br>filter: sepia + hue-rotate';
                    console.log('âœ… æš–è‰²èª¿ç‰¹æ•ˆå·²å¥—ç”¨');
                    break;

                case 'rainbowBorder':
                    container.classList.add('effect-rainbow-border');
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨å½©è™¹é‚Šæ¡†<br>ä½¿ç”¨ ::before å½å…ƒç´ ';
                    console.log('âœ… å½©è™¹é‚Šæ¡†å·²å¥—ç”¨');
                    break;

                case 'neon':
                    container.classList.add('effect-neon');
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨éœ“è™¹é‚Šæ¡†<br>box-shadow + animation';
                    console.log('âœ… éœ“è™¹é‚Šæ¡†å·²å¥—ç”¨');
                    break;

                case 'glow':
                    container.classList.add('effect-glow');
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨ç™¼å…‰é‚Šæ¡†<br>é‡‘è‰² box-shadow';
                    console.log('âœ… ç™¼å…‰é‚Šæ¡†å·²å¥—ç”¨');
                    break;

                case 'particles':
                    createAnimation('â­', 20);
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨æ˜Ÿæ˜Ÿå‹•ç•«<br>20å€‹æ˜Ÿæ˜Ÿå¾ä¸Šå¾€ä¸‹æ‰';
                    console.log('âœ… æ˜Ÿæ˜Ÿå‹•ç•«å·²å¥—ç”¨');
                    break;

                case 'hearts':
                    createAnimation('â¤ï¸', 20);
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨æ„›å¿ƒå‹•ç•«<br>20å€‹æ„›å¿ƒå¾ä¸Šå¾€ä¸‹æ‰';
                    console.log('âœ… æ„›å¿ƒå‹•ç•«å·²å¥—ç”¨');
                    break;

                case 'confetti':
                    createAnimation('ğŸ‰', 20);
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨å½©å¸¶å‹•ç•«<br>20å€‹å½©å¸¶å¾ä¸Šå¾€ä¸‹æ‰';
                    console.log('âœ… å½©å¸¶å‹•ç•«å·²å¥—ç”¨');
                    break;

                case 'snow':
                    createAnimation('â„ï¸', 20);
                    statusInfo.innerHTML = 'âœ… å·²å¥—ç”¨é›ªèŠ±å‹•ç•«<br>20å€‹é›ªèŠ±å¾ä¸Šå¾€ä¸‹æ‰';
                    console.log('âœ… é›ªèŠ±å‹•ç•«å·²å¥—ç”¨');
                    break;
            }
        }

        function createAnimation(symbol, count) {
            // ç§»é™¤ç¾æœ‰å‹•ç•«
            const existing = container.querySelector('.animation-overlay');
            if (existing) existing.remove();

            // å‰µå»ºæ–°å‹•ç•«å±¤
            const overlay = document.createElement('div');
            overlay.className = 'animation-overlay';
            container.appendChild(overlay);

            // å‰µå»ºå‹•ç•«å…ƒç´ 
            for (let i = 0; i < count; i++) {
                const element = document.createElement('div');
                element.textContent = symbol;
                element.style.left = Math.random() * 100 + '%';
                element.style.animationDuration = (Math.random() * 3 + 2) + 's';
                element.style.animationDelay = Math.random() * 2 + 's';
                overlay.appendChild(element);
            }

            console.log(`âœ… å‰µå»ºäº† ${count} å€‹ ${symbol} å‹•ç•«å…ƒç´ `);
        }

        function clearAllEffects() {
            console.log('ğŸ§¹ æ¸…é™¤æ‰€æœ‰ç‰¹æ•ˆ');
            
            // æ¸…é™¤æ¿¾é¡
            video.className = '';
            
            // æ¸…é™¤é‚Šæ¡†
            container.className = 'video-container';
            
            // æ¸…é™¤å‹•ç•«
            const overlay = container.querySelector('.animation-overlay');
            if (overlay) overlay.remove();

            // æ¸…é™¤æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('button').forEach(btn => {
                btn.classList.remove('active');
            });

            currentEffect = null;
            statusInfo.innerHTML = 'ğŸ§¹ æ‰€æœ‰ç‰¹æ•ˆå·²æ¸…é™¤';
        }

        // é é¢è¼‰å…¥æ™‚å•Ÿå‹•æ”å½±æ©Ÿ
        window.addEventListener('load', startCamera);
    </script>
</body>
</html>
